<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <!-- If QEE loaded then replace default TX2K/3/4 recipes by customized GS -->
      <!-- TX2K -->
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX2K"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX2KMaleSurrogate>1</ATPP_GSGeneratorTX2KMaleSurrogate>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX2KFemale"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX2KFemaleSurrogate>1</ATPP_GSGeneratorTX2KFemaleSurrogate>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX2KAndroid"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX2KMale>1</ATPP_GSGeneratorTX2KMale>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX2KFemaleAndroid"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX2KFemale>1</ATPP_GSGeneratorTX2KFemale>
            </products>
          </value>
        </match>
      </li>
      <!-- TX3 -->
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX3"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX3MaleSurrogate>1</ATPP_GSGeneratorTX3MaleSurrogate>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX3Female"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX3FemaleSurrogate>1</ATPP_GSGeneratorTX3FemaleSurrogate>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX3Android"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX3Male>1</ATPP_GSGeneratorTX3Male>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX3FemaleAndroid"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX3Female>1</ATPP_GSGeneratorTX3Female>
            </products>
          </value>
        </match>
      </li>
      <!-- TX4 -->
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX4"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX4MaleSurrogate>1</ATPP_GSGeneratorTX4MaleSurrogate>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX4Female"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX4FemaleSurrogate>1</ATPP_GSGeneratorTX4FemaleSurrogate>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX4Android"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX4Male>1</ATPP_GSGeneratorTX4Male>
            </products>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX4FemaleAndroid"]/products</xpath>
          <value>
            <products>
              <ATPP_GSGeneratorTX4Female>1</ATPP_GSGeneratorTX4Female>
            </products>
          </value>
        </match>
      </li>
      <!-- TX2K meat removing from recipe when QEE loaded-->
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[@Name = "ATPP_BaseCreateSX2K"]/ingredients</xpath>
          <value>
            <ingredients>
              <li>
                <filter>
                  <thingDefs>
                    <li>Plasteel</li>
                  </thingDefs>
                </filter>
                <count>75</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Steel</li>
                  </thingDefs>
                </filter>
                <count>300</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>ComponentIndustrial</li>
                  </thingDefs>
                </filter>
                <count>4</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Gold</li>
                  </thingDefs>
                </filter>
                <count>2</count>
              </li>
            </ingredients>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[@Name = "ATPP_BaseCreateTX2K"]/ingredients</xpath>
          <value>
            <ingredients>
              <li>
                <filter>
                  <thingDefs>
                    <li>Plasteel</li>
                  </thingDefs>
                </filter>
                <count>75</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Steel</li>
                  </thingDefs>
                </filter>
                <count>350</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>ComponentIndustrial</li>
                  </thingDefs>
                </filter>
                <count>12</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Gold</li>
                  </thingDefs>
                </filter>
                <count>2</count>
              </li>
            </ingredients>
          </value>
        </match>
      </li>
      <!-- TX3 meat removing from recipe when QEE loaded-->
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[@Name = "ATPP_BaseCreateSX3"]/ingredients</xpath>
          <value>
            <ingredients>
              <li>
                <filter>
                  <thingDefs>
                    <li>Plasteel</li>
                  </thingDefs>
                </filter>
                <count>100</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>ComponentSpacer</li>
                  </thingDefs>
                </filter>
                <count>1</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>ComponentIndustrial</li>
                  </thingDefs>
                </filter>
                <count>16</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Uranium</li>
                  </thingDefs>
                </filter>
                <count>70</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Gold</li>
                  </thingDefs>
                </filter>
                <count>4</count>
              </li>
            </ingredients>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[@Name = "ATPP_BaseCreateTX3"]/ingredients</xpath>
          <value>
            <ingredients>
              <li>
                <filter>
                  <thingDefs>
                    <li>Plasteel</li>
                  </thingDefs>
                </filter>
                <count>100</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>ComponentSpacer</li>
                  </thingDefs>
                </filter>
                <count>10</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Uranium</li>
                  </thingDefs>
                </filter>
                <count>70</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Gold</li>
                  </thingDefs>
                </filter>
                <count>4</count>
              </li>
            </ingredients>
          </value>
        </match>
      </li>
      <!-- TX4 meat removing from recipe when QEE loaded-->
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[@Name = "ATPP_BaseCreateSX4"]/ingredients</xpath>
          <value>
            <ingredients>
              <li>
                <filter>
                  <thingDefs>
                    <li>Plasteel</li>
                  </thingDefs>
                </filter>
                <count>150</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>ComponentIndustrial</li>
                  </thingDefs>
                </filter>
                <count>24</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>ComponentSpacer</li>
                  </thingDefs>
                </filter>
                <count>4</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Uranium</li>
                  </thingDefs>
                </filter>
                <count>90</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Gold</li>
                  </thingDefs>
                </filter>
                <count>4</count>
              </li>
            </ingredients>
          </value>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationReplace">
          <xpath>/Defs/RecipeDef[@Name = "ATPP_BaseCreateTX4"]/ingredients</xpath>
          <value>
            <ingredients>
              <li>
                <filter>
                  <thingDefs>
                    <li>Plasteel</li>
                  </thingDefs>
                </filter>
                <count>150</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>ComponentSpacer</li>
                  </thingDefs>
                </filter>
                <count>15</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Uranium</li>
                  </thingDefs>
                </filter>
                <count>90</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>AIPersonaCore</li>
                  </thingDefs>
                </filter>
                <count>1</count>
              </li>
              <li>
                <filter>
                  <thingDefs>
                    <li>Gold</li>
                  </thingDefs>
                </filter>
                <count>4</count>
              </li>
            </ingredients>
          </value>
        </match>
      </li>
    </operations>
  </Operation>
  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
        <match Class="PatchOperationAdd">
          <xpath>/Defs</xpath>
          <value>
            <ThingDef ParentName="ResourceBase" Name="ATPP_QEGenomeSequencerBase" Abstract="True">
              <tickerType>Normal</tickerType>
              <graphicData>
                <graphicClass>Graphic_Single</graphicClass>
                <drawSize>(1.5,1.5)</drawSize>
              </graphicData>
              <statBases>
                <MaxHitPoints>50</MaxHitPoints>
                <MarketValue>100</MarketValue>
                <Mass>0.25</Mass>
                <Flammability>1.0</Flammability>
                <DeteriorationRate>1.0</DeteriorationRate>
              </statBases>
              <thingCategories>
                <li>Manufactured</li>
              </thingCategories>
            </ThingDef>
            <ThingDef ParentName="ATPP_QEGenomeSequencerBase">
              <defName>ATPP_GS_TX2KMale</defName>
              <label>Male TX2K frame</label>
              <description>An inactive TX2K functional exoskeleton waiting to be activated in a VAT when its skin has grown</description>
              <graphicData>
                <texPath>Things/Misc/Androids/GenomeSequencers/TX2K/Male</texPath>
              </graphicData>
              <comps>
                <li Class="QEthics.CompProperties_CustomName" />
              </comps>
              <thingCategories Inherit="False">
                <li>Items</li>
              </thingCategories>
              <thingClass>QEthics.GenomeSequence</thingClass>
              <tradeability>Sellable</tradeability>
            </ThingDef>
            <ThingDef ParentName="ATPP_QEGenomeSequencerBase">
              <defName>ATPP_GS_TX2KFemale</defName>
              <label>Female TX2K frame</label>
              <description>An inactive TX2K functional exoskeleton waiting to be activated in a VAT when its skin has grown</description>
              <graphicData>
                <texPath>Things/Misc/Androids/GenomeSequencers/TX2K/Female</texPath>
              </graphicData>
              <comps>
                <li Class="QEthics.CompProperties_CustomName" />
              </comps>
              <thingCategories Inherit="False">
                <li>Items</li>
              </thingCategories>
              <thingClass>QEthics.GenomeSequence</thingClass>
              <tradeability>Sellable</tradeability>
            </ThingDef>
            <ThingDef ParentName="ATPP_QEGenomeSequencerBase">
              <defName>ATPP_GS_TX3Male</defName>
              <label>Male TX3 frame</label>
              <description>An inactive TX3 functional exoskeleton waiting to be activated in a VAT when its skin has grown</description>
              <graphicData>
                <texPath>Things/Misc/Androids/GenomeSequencers/TX34/Male</texPath>
              </graphicData>
              <comps>
                <li Class="QEthics.CompProperties_CustomName" />
              </comps>
              <thingCategories Inherit="False">
                <li>Items</li>
              </thingCategories>
              <thingClass>QEthics.GenomeSequence</thingClass>
              <tradeability>Sellable</tradeability>
            </ThingDef>
            <ThingDef ParentName="ATPP_QEGenomeSequencerBase">
              <defName>ATPP_GS_TX3Female</defName>
              <label>Female TX3 frame</label>
              <description>An inactive TX3 functional exoskeleton waiting to be activated in a VAT when its skin has grown</description>
              <graphicData>
                <texPath>Things/Misc/Androids/GenomeSequencers/TX34/Female</texPath>
              </graphicData>
              <comps>
                <li Class="QEthics.CompProperties_CustomName" />
              </comps>
              <thingCategories Inherit="False">
                <li>Items</li>
              </thingCategories>
              <thingClass>QEthics.GenomeSequence</thingClass>
              <tradeability>Sellable</tradeability>
            </ThingDef>
            <ThingDef ParentName="ATPP_QEGenomeSequencerBase">
              <defName>ATPP_GS_TX4Male</defName>
              <label>Male TX4 frame</label>
              <description>An inactive TX4 functional exoskeleton waiting to be activated in a VAT when its skin has grown</description>
              <graphicData>
                <texPath>Things/Misc/Androids/GenomeSequencers/TX34/Male</texPath>
              </graphicData>
              <comps>
                <li Class="QEthics.CompProperties_CustomName" />
              </comps>
              <thingCategories Inherit="False">
                <li>Items</li>
              </thingCategories>
              <thingClass>QEthics.GenomeSequence</thingClass>
              <tradeability>Sellable</tradeability>
            </ThingDef>
            <ThingDef ParentName="ATPP_QEGenomeSequencerBase">
              <defName>ATPP_GS_TX4Female</defName>
              <label>Female TX4 frame</label>
              <description>An inactive TX4 functional exoskeleton waiting to be activated in a VAT when its skin has grown</description>
              <graphicData>
                <texPath>Things/Misc/Androids/GenomeSequencers/TX34/Female</texPath>
              </graphicData>
              <comps>
                <li Class="QEthics.CompProperties_CustomName" />
              </comps>
              <thingCategories Inherit="False">
                <li>Items</li>
              </thingCategories>
              <thingClass>QEthics.GenomeSequence</thingClass>
              <tradeability>Sellable</tradeability>
            </ThingDef>
          </value>
        </match>
      </li>
    </operations>
  </Operation>
</Patch>